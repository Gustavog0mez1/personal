<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - Personal Trainer Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">Personal Trainer Pro</div>
            <nav>
                <ul>
                    <li><a href="inicio.html">Início</a></li>
                    <li><a href="perfil.html" style="background-color: #3498db;">Meu Perfil</a></li>
                    <li><a href="agenda.html">Minha Agenda</a></li>
                    <li><a href="#" id="logout-btn">Sair</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="dashboard">
            <h1>Meu Perfil</h1>
            
            <div class="profile-card">
                <div class="profile-header">
                    <img src="https://via.placeholder.com/150/3498db/ffffff?text=USER" alt="Foto do Perfil" class="profile-pic">
                    <h2 id="profile-name">Carregando...</h2>
                    <p id="profile-type" class="user-type"></p>
                </div>
                
                <div class="profile-info">
                    <h3>Informações Pessoais</h3>
                    <div class="info-item">
                        <span class="info-label">Nome Completo:</span>
                        <span class="info-value" id="info-name">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">E-mail:</span>
                        <span class="info-value" id="info-email">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Tipo de Usuário:</span>
                        <span class="info-value" id="info-tipo">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Data de Cadastro:</span>
                        <span class="info-value" id="info-data">-</span>
                    </div>
                </div>

                <div class="profile-info">
                    <h3>Estatísticas</h3>
                    <div class="info-item">
                        <span class="info-label">Total de Treinos:</span>
                        <span class="info-value" id="stats-treinos">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Próximo Treino:</span>
                        <span class="info-value" id="stats-proximo">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Status:</span>
                        <span class="info-value" id="stats-status">Ativo</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2023 Personal Trainer Pro - Todos os direitos reservados</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
        
            const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
            
            if (!usuarioLogado) {
                window.location.href = 'index.html';
                return;
            }
            document.getElementById('profile-name').textContent = usuarioLogado.name;
            document.getElementById('profile-type').textContent = usuarioLogado.tipo === 'personal' ? 'Personal Trainer' : 'Cliente';
            document.getElementById('info-name').textContent = usuarioLogado.name;
            document.getElementById('info-email').textContent = usuarioLogado.email;
            document.getElementById('info-tipo').textContent = usuarioLogado.tipo === 'personal' ? 'Personal Trainer' : 'Cliente';
            
            if (usuarioLogado.createdAt) {
                const data = new Date(usuarioLogado.createdAt);
                document.getElementById('info-data').textContent = data.toLocaleDateString('pt-BR');
            }
            
            const agendamentos = JSON.parse(localStorage.getItem('agendamentos')) || [];
            let meusTreinos = [];
            let proximoTreino = null;

            if (usuarioLogado.tipo === 'personal') {
                meusTreinos = agendamentos.filter(ag => ag.trainer === usuarioLogado.name);
            } else {
                meusTreinos = agendamentos.filter(ag => ag.client === usuarioLogado.name);
            }
            const agora = new Date();
            const treinosFuturos = meusTreinos.filter(ag => {
                const dataTreino = new Date(ag.date + 'T' + ag.time);
                return dataTreino > agora;
            });

            if (treinosFuturos.length > 0) {
                treinosFuturos.sort((a, b) => new Date(a.date + 'T' + a.time) - new Date(b.date + 'T' + b.time));
                proximoTreino = treinosFuturos[0];
            }

            document.getElementById('stats-treinos').textContent = meusTreinos.length;

            if (proximoTreino) {
                const dataProximo = new Date(proximoTreino.date + 'T' + proximoTreino.time);
                document.getElementById('stats-proximo').textContent = 
                    `${dataProximo.toLocaleDateString('pt-BR')} - ${proximoTreino.time}`;
            } else {
                document.getElementById('stats-proximo').textContent = 'Nenhum agendado';
            }
            const profileType = document.getElementById('profile-type');
            if (usuarioLogado.tipo === 'personal') {
                profileType.style.color = '#e74c3c';
                profileType.style.fontWeight = 'bold';
            } else {
                profileType.style.color = '#3498db';
                profileType.style.fontWeight = 'bold';
            }
            document.getElementById('logout-btn').addEventListener('click', function() {
                localStorage.removeItem('usuarioLogado');
                window.location.href = 'index.html';
            });
        });
    </script>
</body>
</html>
